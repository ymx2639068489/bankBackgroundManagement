(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a526a6e"],{"2ec5":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",[i("div",{attrs:{slot:"header"},slot:"header"},[i("h3",{staticStyle:{margin:"0"}},[i("el-button",{staticStyle:{border:"0"},attrs:{icon:"el-icon-arrow-left"},on:{click:function(e){return t.$router.push("/activity/activityList")}}},[t._v("返回")]),t._v(" 更新秒杀活动 "+t._s(t.form.activity_name)+" ")],1)]),i("el-form",[i("el-form-item",{attrs:{label:"活动名称","label-width":t.labelWidth}},[i("el-input",{model:{value:t.form.activity_name,callback:function(e){t.$set(t.form,"activity_name",e)},expression:"form.activity_name"}})],1),i("el-form-item",{attrs:{label:"活动开始时间","label-width":t.labelWidth}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:t.form.start_time,callback:function(e){t.$set(t.form,"start_time",e)},expression:"form.start_time"}})],1),i("el-form-item",{attrs:{label:"活动结束时间","label-width":t.labelWidth}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:t.form.ending_time,callback:function(e){t.$set(t.form,"ending_time",e)},expression:"form.ending_time"}})],1),i("el-form-item",{attrs:{label:"活动商品","label-width":t.labelWidth}},[i("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:"请输入内容"},model:{value:t.form.product_id,callback:function(e){t.$set(t.form,"product_id",e)},expression:"form.product_id"}})],1),i("el-form-item",{attrs:{label:"活动描述","label-width":t.labelWidth}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),i("el-form-item",{attrs:{label:"规则介绍","label-width":t.labelWidth}},[i("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.form.roles_introduction,callback:function(e){t.$set(t.form,"roles_introduction",e)},expression:"form.roles_introduction"}})],1)],1),i("el-button",{staticStyle:{"margin-left":"250px"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)},r=[],a=(i("a4d3"),i("e01a"),i("d81d"),i("c4c8")),o=i("ca41"),c={data:function(){return{timeout:null,labelWidth:"150px",form:{activity_id:"",activity_name:"",description:"",ending_time:"",product_id:"",product_name:"",roles_introduction:"",start_time:""}}},mounted:function(){var t=this,e=this.$store.state.cacheData.currentActive;console.log(e),e&&e.activity_id||this.$router.push("/activity/activityList"),this.form.activity_id=e.activity_id,Object(o["e"])(e.activity_id).then((function(e){console.log(e),t.form.activity_name=e.activity_name,t.form.description=e.description,t.form.product_id=e.product.ID+""+e.product.product_name,t.form.roles_introduction=e.roles_introduction,t.form.start_time=new Date(e.start_time),t.form.ending_time=new Date(e.ending_time)}))},methods:{querySearchAsync:function(t,e){clearTimeout(this.timeout),this.timeout=setTimeout((function(){Object(a["c"])({page:1,page_size:100,product_name:String(t),audit_status:2}).then((function(t){var i=t.List.map((function(t){return{value:t.ID+" "+t.product_name,label:t.ID}}));e(i)}))}),300)},submit:function(){var t=this;Object(o["i"])(this.form).then((function(e){t.$store.commit("cacheData/SET_CURRENT_ACTIVE",{}),console.log(e),t.$message({message:"更新成功",type:"success"}),t.$router.push("/activity/activityList")}))}}},u=c,d=(i("8864"),i("2877")),s=Object(d["a"])(u,n,r,!1,null,"3aa5cb62",null);e["default"]=s.exports},8864:function(t,e,i){"use strict";i("9fab")},"9fab":function(t,e,i){},c4c8:function(t,e,i){"use strict";i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return a})),i.d(e,"e",(function(){return c})),i.d(e,"d",(function(){return u})),i.d(e,"a",(function(){return d}));i("a9e3"),i("d3b7"),i("fb6a"),i("a15b");var n=i("b775");function r(t){t.interest_rate_type=Number(t.interest_rate_type||0),t.audit_status=Number(t.audit_status||0);var e=t.interest_rate_type,i=t.page,r=t.page_size,a=t.product_name,o=t.audit_status;return new Promise((function(t,c){Object(n["a"])({url:"/api/product/all",method:"post",data:JSON.stringify({interest_rate_type:e,page:i,page_size:r,product_name:a,audit_status:o})}).then((function(e){0!==e.code?c(e.msg):t(e.data)}))}))}function a(t){return new Promise((function(e,i){Object(n["a"])({url:"/api/product/delete",method:"delete",data:JSON.stringify({product_id:t})}).then((function(t){0!==t.code?i(t.msg):e(t.data)}))}))}function o(t,e){return(Array(e).join("0")+t).slice(-e)}function c(t){var e=o(t.min_hold_time.year,4)+"-"+o(t.min_hold_time.month,2)+"-"+o(t.min_hold_time.day,2),i={interest_rate_type:t.interest_rate_type,min_hold_time:e,product_description:t.product_description,product_id:t.ID,product_interest_rate:Number(t.product_interest_rate),product_name:t.product_name,product_number:Number(t.product_number),product_price:Number(t.product_price),product_tags:t.product_tags};return console.log(i),new Promise((function(t,e){Object(n["a"])({url:"/api/product/update",method:"put",data:JSON.stringify(i)}).then((function(i){0!==i.code?e(i.msg):t(i.data)}))}))}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return new Promise((function(i,r){Object(n["a"])({url:"/api/product/tag/list",method:"post",data:JSON.stringify({page:t,page_size:e})}).then((function(t){0!==t.code?r(t.msg):i(t.data)}))}))}function d(t){var e=t.min_hold_time,i=t.product_interest_rate,r=t.product_number,a=t.product_price;i=Number(i),r=Number(r),a=Number(a),e=o(e.year,4)+"-"+o(e.month,2)+"-"+o(e.day,2);var c=t.interest_rate_type,u=t.product_description,d=t.product_name,s=t.product_tags;return new Promise((function(t,o){Object(n["a"])({url:"/api/product/release",method:"post",data:JSON.stringify({interest_rate_type:c,min_hold_time:e,product_description:u,product_interest_rate:i,product_name:d,product_number:r,product_price:a,product_tags:s})}).then((function(e){0!==e.code?o(e.msg):t(e.data)}))}))}},ca41:function(t,e,i){"use strict";i.d(e,"f",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"g",(function(){return c})),i.d(e,"i",(function(){return u})),i.d(e,"d",(function(){return d})),i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return m})),i.d(e,"e",(function(){return _})),i.d(e,"h",(function(){return p}));i("d3b7"),i("a9e3"),i("a4d3"),i("e01a"),i("ac1f"),i("466d");var n=i("b775"),r=i("ed08");function a(t){var e=t.activity_status,i=t.audit_status,r=t.page,a=t.page_size,o=t.start_time,c=t.ending_time;return new Promise((function(t,u){Object(n["a"])({url:"/api/spikeActivity/list",method:"post",data:JSON.stringify({activity_status:e,audit_status:i,page:r,page_size:a,start_time:o,ending_time:c})}).then((function(e){0!==e.code&&u(e.msg),t(e.data)}))}))}function o(t){return new Promise((function(e,i){Object(n["a"])({url:"/api//spikeActivity/delete",method:"delete",data:JSON.stringify({activity_id:t})}).then((function(t){0!==t.code&&i(t.msg),e(t.data)}))}))}function c(t){return new Promise((function(e,i){Object(n["a"])({url:"/api/spikeActivity/getActivityUserRecord",method:"post",data:JSON.stringify({activity_id:t})}).then((function(t){0!==t.code&&i(t.msg),e(t.data)}))}))}function u(t){t.product_id=Number(t.product_id),console.log(t),t.start_time=Object(r["d"])(t.start_time,"{y}-{m}-{d} {h}:{i}:{s}"),t.ending_time=Object(r["d"])(t.ending_time,"{y}-{m}-{d} {h}:{i}:{s}"),console.log(t);var e=t.product_id,i=t.activity_id,a=t.activity_name,o=t.description,c=t.ending_time,u=t.roles_introduction,d=t.start_time;return new Promise((function(t,r){Object(n["a"])({url:"/api/spikeActivity/update",method:"put",data:JSON.stringify({activity_id:i,activity_name:a,description:o,ending_time:c,product_id:e,roles_introduction:u,start_time:d})}).then((function(e){0!==e.code?r(e.msg):t(e.data)})).catch((function(t){r(t)}))}))}function d(t){return new Promise((function(e,i){Object(n["a"])({url:"/api/spikeActivity/getActivityGuidanceInformation",method:"post",data:JSON.stringify({activity_id:t})}).then((function(t){0!==t.code&&i(t.msg),e(t.data)}))}))}function s(t,e){return new Promise((function(i,r){Object(n["a"])({url:e?"/api/spikeActivity/updateGuidanceInformation":"/api/spikeActivity/addGuidanceInformation",method:"post",data:t}).then((function(t){i(t.msg)}))}))}function m(t){var e=Number(t.product_id.match(/[0-9]+/)),i=Object(r["d"])(t.ending_time),a=Object(r["d"])(t.start_time),o=t.activity_name,c=t.description,u=t.roles_introduction;return new Promise((function(t,r){Object(n["a"])({url:"/api/spikeActivity/release",method:"post",data:JSON.stringify({activity_name:o,description:c,ending_time:i,product_id:e,roles_introduction:u,start_time:a})}).then((function(e){t(e.msg)}))}))}function _(t){return new Promise((function(e,i){Object(n["a"])({url:"/api/spikeActivity/getActivityInfoByID",method:"post",data:JSON.stringify({activity_id:t})}).then((function(t){0!==t.code&&i(t.msg),e(t.data)}))}))}function p(t){t.activity_id=Number(t.activity_id),t.order_status=Number(t.order_status),t.page=Number(t.page),t.page_size=Number(t.page_size);var e=t.activity_id,i=t.order_status,r=t.page,a=t.page_size;return new Promise((function(t,o){Object(n["a"])({url:"/api/order/getOrderListByActivityID",method:"post",data:JSON.stringify({activity_id:e,order_status:i,page:r,page_size:a})}).then((function(e){0!==e.code&&o(e.msg),t(e.data)}))}))}}}]);