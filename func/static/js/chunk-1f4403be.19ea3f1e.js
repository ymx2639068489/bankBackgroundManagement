(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f4403be"],{"433c":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[[a("i",{staticClass:"el-icon-edit-outline"}),a("span",[t._v("发布产品")])],a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.$router.back()}}},[t._v("返 回")])],2),a("table",{staticClass:"table-box",attrs:{border:"0"}},[a("tr",{attrs:{height:t.lineHeight}},[a("td",{attrs:{width:t.lableWidth}},[a("span",{staticClass:"label_back"},[t._v("产品名称")])]),a("td",{attrs:{width:t.dataWidth,colspan:"3"}},[a("el-input",{staticClass:"inputs",staticStyle:{width:"95%"},attrs:{placeholder:"请输入产品名称"},model:{value:t.form.product_name,callback:function(e){t.$set(t.form,"product_name",e)},expression:"form.product_name"}})],1)]),a("tr",{attrs:{height:t.lineHeight}},[a("td",{attrs:{width:t.lableWidth}},[a("span",{staticClass:"label_back"},[t._v("利率类型")])]),a("td",{attrs:{width:t.dataWidth}},[a("el-select",{staticStyle:{width:"87%"},attrs:{placeholder:"利率类型"},model:{value:t.form.interest_rate_type,callback:function(e){t.$set(t.form,"interest_rate_type",e)},expression:"form.interest_rate_type"}},t._l(t.interest_rate_type_options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("td",{attrs:{width:t.lableWidth}},[a("span",{staticClass:"label_back"},[t._v("单笔价格")])]),a("td",{attrs:{width:t.dataWidth}},[a("el-input",{staticClass:"inputs",staticStyle:{width:"87%"},attrs:{type:"number",min:"0"},model:{value:t.form.product_price,callback:function(e){t.$set(t.form,"product_price",e)},expression:"form.product_price"}})],1)]),a("tr",{attrs:{height:t.lineHeight}},[a("td",{attrs:{width:t.lableWidth}},[a("span",{staticClass:"label_back"},[t._v("产品数量")])]),a("td",{attrs:{width:t.dataWidth}},[a("el-input",{staticClass:"inputs",staticStyle:{width:"87%"},attrs:{type:"number",min:"1",max:"2000000000"},model:{value:t.form.product_number,callback:function(e){t.$set(t.form,"product_number",e)},expression:"form.product_number"}})],1),a("td",{attrs:{width:t.lableWidth}},[a("span",{staticClass:"label_back"},[t._v("产品利率(%)")])]),a("td",{attrs:{width:t.dataWidth}},[a("el-input",{staticClass:"inputs",staticStyle:{width:"87%"},attrs:{type:"number"},model:{value:t.form.product_interest_rate,callback:function(e){t.$set(t.form,"product_interest_rate",e)},expression:"form.product_interest_rate"}})],1)]),a("tr",{attrs:{height:t.lineHeight}},[a("td",{attrs:{width:t.lableWidth}},[a("span",{staticClass:"label_back"},[t._v("产品标签")])]),a("td",[a("el-select",{staticStyle:{width:"87%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"","value-key":"tag_id",placeholder:"请选择/输入标签"},model:{value:t.currentTag,callback:function(e){t.currentTag=e},expression:"currentTag"}},t._l(t.tagList,(function(t){return a("el-option",{key:t.tag_id,attrs:{label:t.tag_name,value:t}})})),1)],1),a("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"2"}},t._l(t.form.product_tags,(function(e,r){return a("el-tag",{key:r,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(e)}}},[t._v(" "+t._s(e.tag_name)+" ")])})),1)]),a("tr",{attrs:{height:t.lineHeight}},[a("td",{attrs:{width:t.lableWidth+30}},[a("span",{staticClass:"label_back"},[t._v("最小持有时间(年/月/日)")])]),a("td",{attrs:{width:t.dataWidth,colspan:"3"}},[a("el-input",{staticStyle:{width:"195px"},attrs:{type:"number",min:"0"},model:{value:t.form.min_hold_time.year,callback:function(e){t.$set(t.form.min_hold_time,"year",e)},expression:"form.min_hold_time.year"}}),a("el-select",{staticStyle:{width:"180px","margin-left":"5%"},attrs:{placeholder:"请选择"},model:{value:t.form.min_hold_time.month,callback:function(e){t.$set(t.form.min_hold_time,"month",e)},expression:"form.min_hold_time.month"}},t._l(12,(function(t){return a("el-option",{key:t,attrs:{label:t-1,value:t-1}})})),1),a("el-select",{staticStyle:{width:"180px","margin-left":"5%"},attrs:{placeholder:"请选择"},model:{value:t.form.min_hold_time.day,callback:function(e){t.$set(t.form.min_hold_time,"day",e)},expression:"form.min_hold_time.day"}},t._l(32,(function(t){return a("el-option",{key:t,attrs:{label:t-1,value:t-1}})})),1)],1)]),a("tr",{attrs:{height:t.lineHeight}},[a("td",{attrs:{width:t.lableWidth}},[a("span",{staticClass:"label_back"},[t._v("产品描述")])]),a("td",{attrs:{colspan:"3"}},[a("el-input",{staticStyle:{width:"95%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:100},placeholder:"请输入内容"},model:{value:t.form.product_description,callback:function(e){t.$set(t.form,"product_description",e)},expression:"form.product_description"}})],1)])]),a("div",{staticClass:"bottom-btn"},[a("el-button",{staticStyle:{background:"rgb(66,185,131)",color:"white"},attrs:{round:""},on:{click:t.sureSubmit}},[t._v("已 确 定 产 品 信 息 正 确 并 提 交")])],1)])},n=[],i=a("b85c"),l=(a("d81d"),a("a434"),a("b146")),o=a("c4c8"),s={data:function(){return{form:{min_hold_time:{year:0,month:0,day:0},interest_rate_type:"",product_description:"",product_interest_rate:"",product_name:"",product_number:"100000",product_price:"10000",product_tags:[]},lableWidth:80,dataWidth:150,lineHeight:80,product_status_options:l["i"],product_type_options:l["k"],interest_rate_type_options:l["d"],currentTag:[],tagList:[]}},watch:{currentTag:function(t,e){if("string"===typeof t[0]){var a,r=Object(i["a"])(this.form.product_tags);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(console.log(n.tag_name,t[0]),n.tag_name===t[0])return this.currentTag=[],void this.$message("标签已存在")}}catch(u){r.e(u)}finally{r.f()}this.form.product_tags.push({tag_id:0,tag_name:t[0]}),this.currentTag=[]}else if(1===t.length&&0===e.length){var l,o=Object(i["a"])(this.form.product_tags);try{for(o.s();!(l=o.n()).done;){var s=l.value;if(s.tag_name===t[0].tag_name)return this.currentTag=[],void this.$message("标签已存在")}}catch(u){o.e(u)}finally{o.f()}this.form.product_tags.push({tag_id:t[0].tag_id,tag_name:t[0].tag_name}),this.currentTag=[]}}},created:function(){var t=this;Object(o["d"])().then((function(e){t.tagList=e.List.map((function(t){return{tag_id:t.ID,tag_name:t.tag_name}}))}))},methods:{handleClose:function(t){this.form.product_tags.splice(this.form.product_tags.indexOf(t),1)},sureSubmit:function(){var t=this;""!==this.form.product_name?""!==this.form.product_price?""!==this.form.product_number?""!==this.form.product_interest_rate?Object(o["a"])(this.form).then((function(e){t.$message({message:"添加成功",type:"success"}),setTimeout((function(){t.$router.back()}),2e3)})):this.$message("请输入产品利率"):this.$message("请输入产品数量"):this.$message("请输入产品价格"):this.$message("请输入产品名称")}}},u=s,c=(a("7284"),a("2877")),d=Object(c["a"])(u,r,n,!1,null,"875415ba",null);e["default"]=d.exports},7284:function(t,e,a){"use strict";a("e8c9")},b146:function(t,e,a){"use strict";a.d(e,"i",(function(){return r})),a.d(e,"j",(function(){return n})),a.d(e,"k",(function(){return i})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return o})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return u})),a.d(e,"a",(function(){return c})),a.d(e,"p",(function(){return d})),a.d(e,"q",(function(){return p})),a.d(e,"n",(function(){return _})),a.d(e,"o",(function(){return m})),a.d(e,"f",(function(){return h})),a.d(e,"g",(function(){return f})),a.d(e,"h",(function(){return b})),a.d(e,"l",(function(){return g})),a.d(e,"m",(function(){return v}));var r=[{value:2,label:"审核通过"},{value:1,label:"等待审核"},{value:0,label:"测试中"},{value:-1,label:"审核失败"}],n={2:"审核通过",1:"等待审核",0:"测试中","-1":"审核失败"},i=[{value:1,label:"存款"},{value:2,label:"贷款"}],l=[{value:0,label:"暂不定义"},{value:1,label:"年利率"},{value:2,label:"月利率"},{value:3,label:"日利率"}],o={0:"暂不定义",1:"年利率",2:"月利率",3:"日利率"},s=[{value:1,label:"筛选配置"},{value:2,label:"资源配置"},{value:3,label:"等待审核"},{value:4,label:"等待开始"}],u={1:"筛选配置",2:"资源配置",3:"等待审核",4:"等待开始"},c=[{value:1,label:"等待审核"},{value:2,label:"审核成功"},{value:-1,label:"审核失败"}],d=[{value:1,label:"正常"},{value:-1,label:"冻结"},{value:0,label:"测试"}],p={1:"正常","-1":"冻结",0:"测试"},_=[{label:"女",value:1},{label:"男",value:2},{label:"未知",value:0}],m={1:"女",2:"男",0:"未知"},h=[{value:1,label:"等待处理"},{value:2,label:"处理成功"},{value:-1,label:"订单失败"}],f={1:"等待处理",2:"处理成功","-1":"订单失败"},b={1:"未支付",2:"支付","-1":"支付失败"},g=[{value:1,label:"等待审核"},{value:2,label:"审核成功"},{value:-1,label:"审核失败"},{value:0,label:"查看所有"}],v={1:"等待审核",2:"审核成功","-1":"审核失败"}},c4c8:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return u}));a("a9e3"),a("d3b7"),a("fb6a"),a("a15b");var r=a("b775");function n(t){t.interest_rate_type=Number(t.interest_rate_type||0),t.audit_status=Number(t.audit_status||0);var e=t.interest_rate_type,a=t.page,n=t.page_size,i=t.product_name,l=t.audit_status;return new Promise((function(t,o){Object(r["a"])({url:"/api/product/all",method:"post",data:JSON.stringify({interest_rate_type:e,page:a,page_size:n,product_name:i,audit_status:l})}).then((function(e){0!==e.code?o(e.msg):t(e.data)}))}))}function i(t){return new Promise((function(e,a){Object(r["a"])({url:"/api/product/delete",method:"delete",data:JSON.stringify({product_id:t})}).then((function(t){0!==t.code?a(t.msg):e(t.data)}))}))}function l(t,e){return(Array(e).join("0")+t).slice(-e)}function o(t){var e=l(t.min_hold_time.year,4)+"-"+l(t.min_hold_time.month,2)+"-"+l(t.min_hold_time.day,2),a={interest_rate_type:t.interest_rate_type,min_hold_time:e,product_description:t.product_description,product_id:t.ID,product_interest_rate:Number(t.product_interest_rate),product_name:t.product_name,product_number:Number(t.product_number),product_price:Number(t.product_price),product_tags:t.product_tags};return console.log(a),new Promise((function(t,e){Object(r["a"])({url:"/api/product/update",method:"put",data:JSON.stringify(a)}).then((function(a){0!==a.code?e(a.msg):t(a.data)}))}))}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return new Promise((function(a,n){Object(r["a"])({url:"/api/product/tag/list",method:"post",data:JSON.stringify({page:t,page_size:e})}).then((function(t){0!==t.code?n(t.msg):a(t.data)}))}))}function u(t){var e=t.min_hold_time,a=t.product_interest_rate,n=t.product_number,i=t.product_price;a=Number(a),n=Number(n),i=Number(i),e=l(e.year,4)+"-"+l(e.month,2)+"-"+l(e.day,2);var o=t.interest_rate_type,s=t.product_description,u=t.product_name,c=t.product_tags;return new Promise((function(t,l){Object(r["a"])({url:"/api/product/release",method:"post",data:JSON.stringify({interest_rate_type:o,min_hold_time:e,product_description:s,product_interest_rate:a,product_name:u,product_number:n,product_price:i,product_tags:c})}).then((function(e){0!==e.code?l(e.msg):t(e.data)}))}))}},e8c9:function(t,e,a){}}]);