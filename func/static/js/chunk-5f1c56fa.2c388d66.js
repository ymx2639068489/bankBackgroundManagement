(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f1c56fa"],{"0a73":function(t,i,e){"use strict";e("4db2")},"359b":function(t,i,e){},"4db2":function(t,i,e){},"724f":function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"box"},[e("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-block","maigin-left":"120px"},attrs:{drag:"",multiple:"",action:"","list-type":"picture-card","on-change":t.handleChange,"auto-upload":!1,"show-file-list":!1}},[e("i",{staticClass:"el-icon-upload"})]),e("div",{staticStyle:{margin:"25px 130px"}},[t._m(0),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")]),e("el-button",{staticStyle:{margin:"30px 50px"},attrs:{type:"primary",size:"default"},on:{click:t.submit}},[t._v("点击上传")])],1),e("div",{staticClass:"components-container board"},[e("Kanban",{key:1,staticClass:"kanban todo",attrs:{list:t.list1,group:t.group,"header-text":"预览顺序","style-object":{height:"70vh","overflow-y":"auto","overflow-x":"hidden"}}})],1)],1)},a=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),e("em",[t._v("点击上传")])])}],s=e("b85c"),r=(e("a434"),e("ca41")),c=e("f0b0"),o={components:{Kanban:c["a"]},data:function(){return{group:"mission",activity_id:null,file:null,list1:[],f:!1}},created:function(){if(this.activity_id=this.$store.getters.getCurrentActive.activity_id,!this.activity_id)return this.$message({type:"error",message:"请先选择活动"}),void this.$router.push("/activity/activityList");this.getActivityGuidance()},methods:{getActivityGuidance:function(){var t=this;Object(r["d"])(this.activity_id).then((function(i){t.list1.splice(0,t.list1.length),i.guidance_information.length&&(t.f=!0);var e,n=Object(s["a"])(i.guidance_information);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.list1.push({ID:a.ID,url:a.host+"/"+a.relative_path})}}catch(r){n.e(r)}finally{n.f()}}))},handleChange:function(t,i){this.list1.splice(0,this.list1.length);var e,n=Object(s["a"])(i);try{for(n.s();!(e=n.n()).done;){var a=e.value;this.list1.push({file:a.raw,url:a.url})}}catch(r){n.e(r)}finally{n.f()}},submit:function(){var t=this;this.file=[];var i,e=Object(s["a"])(this.list1);try{for(e.s();!(i=e.n()).done;){var n=i.value;this.file.push(n.file)}}catch(l){e.e(l)}finally{e.f()}var a=this.file.length;if(0!==a){var c,o=new FormData,u=Object(s["a"])(this.file);try{for(u.s();!(c=u.n()).done;){var d=c.value;o.append("file",d)}}catch(l){u.e(l)}finally{u.f()}o.append("activity_id",this.activity_id),o.append("fileNumber",a),Object(r["b"])(o,this.f).then((function(i){t.$message({type:"success",message:i}),t.getActivityGuidance(),t.$router.push("/activity/activityList")}))}else this.$message({type:"error",message:"请先上传图片"})}}},u=o,d=(e("0a73"),e("2877")),l=Object(d["a"])(u,n,a,!1,null,"0bd1b7a8",null);i["default"]=l.exports},ca41:function(t,i,e){"use strict";e.d(i,"f",(function(){return s})),e.d(i,"c",(function(){return r})),e.d(i,"g",(function(){return c})),e.d(i,"i",(function(){return o})),e.d(i,"d",(function(){return u})),e.d(i,"b",(function(){return d})),e.d(i,"a",(function(){return l})),e.d(i,"e",(function(){return f})),e.d(i,"h",(function(){return p}));e("d3b7"),e("a9e3"),e("a4d3"),e("e01a"),e("ac1f"),e("466d");var n=e("b775"),a=e("ed08");function s(t){var i=t.activity_status,e=t.audit_status,a=t.page,s=t.page_size,r=t.start_time,c=t.ending_time;return new Promise((function(t,o){Object(n["a"])({url:"/api/spikeActivity/list",method:"post",data:JSON.stringify({activity_status:i,audit_status:e,page:a,page_size:s,start_time:r,ending_time:c})}).then((function(i){0!==i.code&&o(i.msg),t(i.data)}))}))}function r(t){return new Promise((function(i,e){Object(n["a"])({url:"/api//spikeActivity/delete",method:"delete",data:JSON.stringify({activity_id:t})}).then((function(t){0!==t.code&&e(t.msg),i(t.data)}))}))}function c(t){return new Promise((function(i,e){Object(n["a"])({url:"/api/spikeActivity/getActivityUserRecord",method:"post",data:JSON.stringify({activity_id:t})}).then((function(t){0!==t.code&&e(t.msg),i(t.data)}))}))}function o(t){t.product_id=Number(t.product_id),console.log(t),t.start_time=Object(a["d"])(t.start_time,"{y}-{m}-{d} {h}:{i}:{s}"),t.ending_time=Object(a["d"])(t.ending_time,"{y}-{m}-{d} {h}:{i}:{s}"),console.log(t);var i=t.product_id,e=t.activity_id,s=t.activity_name,r=t.description,c=t.ending_time,o=t.roles_introduction,u=t.start_time;return new Promise((function(t,a){Object(n["a"])({url:"/api/spikeActivity/update",method:"put",data:JSON.stringify({activity_id:e,activity_name:s,description:r,ending_time:c,product_id:i,roles_introduction:o,start_time:u})}).then((function(i){0!==i.code?a(i.msg):t(i.data)})).catch((function(t){a(t)}))}))}function u(t){return new Promise((function(i,e){Object(n["a"])({url:"/api/spikeActivity/getActivityGuidanceInformation",method:"post",data:JSON.stringify({activity_id:t})}).then((function(t){0!==t.code&&e(t.msg),i(t.data)}))}))}function d(t,i){return new Promise((function(e,a){Object(n["a"])({url:i?"/api/spikeActivity/updateGuidanceInformation":"/api/spikeActivity/addGuidanceInformation",method:"post",data:t}).then((function(t){e(t.msg)}))}))}function l(t){var i=Number(t.product_id.match(/[0-9]+/)),e=Object(a["d"])(t.ending_time),s=Object(a["d"])(t.start_time),r=t.activity_name,c=t.description,o=t.roles_introduction;return new Promise((function(t,a){Object(n["a"])({url:"/api/spikeActivity/release",method:"post",data:JSON.stringify({activity_name:r,description:c,ending_time:e,product_id:i,roles_introduction:o,start_time:s})}).then((function(i){t(i.msg)}))}))}function f(t){return new Promise((function(i,e){Object(n["a"])({url:"/api/spikeActivity/getActivityInfoByID",method:"post",data:JSON.stringify({activity_id:t})}).then((function(t){0!==t.code&&e(t.msg),i(t.data)}))}))}function p(t){t.activity_id=Number(t.activity_id),t.order_status=Number(t.order_status),t.page=Number(t.page),t.page_size=Number(t.page_size);var i=t.activity_id,e=t.order_status,a=t.page,s=t.page_size;return new Promise((function(t,r){Object(n["a"])({url:"/api/order/getOrderListByActivityID",method:"post",data:JSON.stringify({activity_id:i,order_status:e,page:a,page_size:s})}).then((function(i){0!==i.code&&r(i.msg),t(i.data)}))}))}},d86f:function(t,i,e){"use strict";e("359b")},f0b0:function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"board-column-header"},[t._v(" "+t._s(t.headerText)+" ")]),e("div",{staticClass:"board-column",style:t.styleObject},[e("draggable",t._b({staticClass:"board-column-content",attrs:{list:t.list,animation:"600",scroll:t.isScroll,"set-data":t.setData}},"draggable",t.$attrs,!1),t._l(t.list,(function(i){return e("div",{key:i.ID,staticClass:"board-item",on:{click:function(e){return t.itemClick(i)}}},[e("img",{attrs:{src:i.url,alt:"error",title:i.title&&i.description?"标题: "+i.title+"\n描述: "+i.description:""}})])})),0)],1)])},a=[],s=e("1980"),r=e.n(s),c={name:"DragKanbanDemo",components:{draggable:r.a},props:{headerText:{type:String,default:"Header"},styleObject:{type:Object,default:function(){return{}}},isScroll:{type:Boolean,default:!0},list:{type:Array,default:function(){return[]}}},methods:{setData:function(t){t.setData("Text","")},itemClick:function(t){this.$emit("itemClick",t)}}},o=c,u=(e("d86f"),e("2877")),d=Object(u["a"])(o,n,a,!1,null,"c768c150",null);i["a"]=d.exports}}]);